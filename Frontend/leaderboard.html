<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PantryPal | Leaderboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; }
        .brand-font { font-family: 'Fredoka One', cursive; }
        .text-coral { color: #E97D5B; }
        .bg-coral { background-color: #E97D5B; }
        .sidebar-item:hover { color: #E97D5B; }
        
        /* Smooth scrolling for mobile list */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #E97D5B; border-radius: 10px; }
    </style>
</head>
<body class="bg-gray-50 flex flex-col md:flex-row min-h-screen">

    <aside class="hidden md:flex w-72 bg-white border-r border-gray-100 flex-col p-8 fixed h-full">
        <div class="text-3xl brand-font text-coral mb-12">PantryPal</div>
        <nav class="space-y-6 flex-grow">
            <a href="homepage.html" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="home"></i> Home
            </a>
            <a href="search.html" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="search"></i> Search
            </a>
            <a href="create.html" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="plus-square"></i> Create
            </a>
            <a href="leaderboard.html" class="flex items-center gap-4 bg-coral text-white px-5 py-4 rounded-2xl font-semibold shadow-lg shadow-orange-100">
                <i data-lucide="trophy"></i> Leaderboard
            </a>
            <a href="analytics.html" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="bar-chart-2"></i> Analytics
            </a>
            <a href="profilepage.html" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="user"></i> Profile
            </a>
        </nav>
        <div class="border-t border-gray-100 pt-8">
            <a href="../README.md" class="flex items-center gap-4 px-5 py-2 text-gray-500 font-semibold sidebar-item transition-all">
                <i data-lucide="log-out"></i> Log out
            </a>
        </div>
    </aside>

    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 flex justify-around items-center p-4 z-50">
        <a href="homepage.html" class="text-gray-400"><i data-lucide="home"></i></a>
        <a href="search.html" class="text-gray-400"><i data-lucide="search"></i></a>
        <a href="create.html" class="text-gray-400"><i data-lucide="plus-square"></i></a>
        <a href="leaderboard.html" class="text-coral"><i data-lucide="trophy"></i></a>
        <a href="profilepage.html" class="text-gray-400"><i data-lucide="user"></i></a>
    </nav>

    <main class="md:ml-72 flex-grow p-6 md:p-12 bg-white flex flex-col items-center min-h-screen pb-24 md:pb-12">
        
        <header class="text-center mt-4 md:mt-0">
            <h1 class="text-4xl md:text-6xl brand-font text-coral mb-4">Chef of the Month</h1>
            <p class="text-gray-500 text-base md:text-xl font-medium px-4">Celebrating our community's top culinary creators.</p>
        </header>

        <div id="leaderboard-container" class="mt-12 md:mt-20 w-full max-w-2xl border-2 border-dashed border-gray-100 rounded-[32px] md:rounded-[40px] p-6 md:p-12 flex flex-col items-center justify-center min-h-[300px]">
            <p class="text-gray-300 font-semibold text-center italic tracking-wide">Ranking updates every 24 hours...</p>
        </div>

    </main>

    <script>
        // Lucide icons initialization
        lucide.createIcons();

        // Script logic (Unchanged, targeting the specific container ID)
        async function fetchLeaderboard() {
            try {
                const response = await fetch('https://pantry-pal-jur7.onrender.com/api/leaderboard');
                const users = await response.json();
                
                const container = document.getElementById('leaderboard-container');
                if (users.length > 0) {
                    // Optimized for mobile: cleaner borders and better spacing
                    container.classList.remove('border-dashed', 'justify-center');
                    container.classList.add('border-solid');
                    
                    container.innerHTML = users.map((user, index) => `
                        <div class="flex items-center justify-between w-full py-4 px-2 border-b border-gray-50 last:border-0">
                            <div class="flex items-center gap-4">
                                <span class="text-lg font-bold ${index < 3 ? 'text-coral' : 'text-gray-400'}">#${index + 1}</span>
                                <span class="font-semibold text-gray-700">${user.username}</span>
                            </div>
                            <span class="font-bold text-coral bg-orange-50 px-3 py-1 rounded-full text-sm">${user.points} pts</span>
                        </div>
                    `).join('');
                }
            } catch (err) {
                console.error("Error fetching leaderboard:", err);
                const container = document.getElementById('leaderboard-container');
                container.innerHTML = `<p class="text-red-400">Unable to load rankings.</p>`;
            }
        }
        
        window.onload = fetchLeaderboard;
    </script>
</body>
</html>